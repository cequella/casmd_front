<form #studentCard mdcTypography style="padding: 0.5em" (ngSubmit)="findCard(studentCard, $event)">
  <h1 mdcHeadline6>Checar carteirinha</h1>
  
  <div *ngIf="state==1">
    <h1 mdcBody2>Digite abaixo sua matrícula para saber se sua carteirinha já se encontra no CA :D</h1>

    <div style="text-align: center;">
      <mdc-text-field #reg outlined
		      [(ngModel)]="register"
		      [ngModelOptions]="{standalone: true}"
		      label="Matrícula"
		      maxlength="6"
		      pattern="[0-9][0-9][0-9][0-9][0-9][0-9]">
	<mdc-icon leading>person</mdc-icon>
      </mdc-text-field>
    </div>
  </div>

  <app-loading message="Procurando carteirinha" *ngIf="state==2"></app-loading>

  <div *ngIf="state==3">
    <h1 mdcHeadline6>{{register}}:
      <span [style.color]="scResult.deliveredAt?'red':'green'">{{scResult.deliveredAt?"Indisponível":"Disponível"}}</span>
    </h1>
    <div *ngIf="!scResult.deliveredAt; else noResult">
      <h1 mdcBody1>A sua carteirinha já está no CA. Deseja agendar horário para resgatá-la?</h1>
      <div style="text-align: center;">
	<mdc-text-field #dateField
	  outlined
	  type="date"
	  value="2018-09-30"
	  min="2018-09-30"
	  max="2018-12-30"></mdc-text-field>
	<mdc-text-field #timeField
	  outlined
	  type="time"
	  value="14:00"
	  min="10:00"
	  max="22:00"></mdc-text-field>
      </div>
      <div style="text-align: end; margin-top: 1em;">
	<button mdc-button dense style="color: darkred" (click)="cancel()">Voltar</button>
	<button mdc-button dense raised (click)="schedule(dateField.value, timeField.value)">Agendar</button>
      </div>
    </div>
    <ng-template #noResult>
      <h1 mdcBody1>Infelizmente sua carteirinha ainda não está conosco.</h1>
      <div style="text-align: end;">
	<button mdc-button dense raised (click)="cancel()">Voltar</button>
      </div>
    </ng-template>
  </div>

</form>
